package org.opentestsystem.rdw.ingest.processor.repository;

import org.opentestsystem.rdw.ingest.processor.model.Exam;

/**
 * Repository for managing {@link Exam}
 */
public interface ExamRepository {
    /**
     * Create a new exam or update an existing one. {@link Exam#deleted} must be set to false.
     *
     * @param exam     an exam to create or update
     * @param importId an id of the import that creates the {@link Exam}
     * @return the id of the newly created exam
     */
    long upsert(Exam exam, long importId);

    /**
     * Soft delete exam. {@link Exam#deleted} must be set to true.
     *
     * @param exam     an exam to delete
     * @param importId an id of the import that creates the {@link Exam}
     */
    void delete(Exam exam, long importId);

    /**
     * Finds an exam by its unique identifiers
     *
     * @param assessmentId  an assessment if
     * @param opportunityId an opportunity id
     * @return the found exam, null if not found
     */
    Exam findOne(long assessmentId, String opportunityId);
}
