package org.opentestsystem.rdw.ingest.processor.service;


import org.opentestsystem.rdw.ingest.common.model.ImportException;
import org.opentestsystem.rdw.ingest.processor.model.District;
import org.opentestsystem.rdw.ingest.processor.model.School;
import org.opentestsystem.rdw.ingest.processor.model.Student;
import org.opentestsystem.rdw.ingest.processor.model.StudentExamAttributes;
import org.opentestsystem.rdw.model.Examinee;
import org.opentestsystem.rdw.model.Test;

/**
 * An interface responsible for processing {@link Examinee}.
 * It includes data for {@link School}, {@link District}, {@link Student}, and {@link StudentExamAttributes}
 */
public interface ExamineeProcessor {

    /**
     * Processes the {@link Examinee}.
     * This includes:<ul>
     *     <li>saving the given school</li>
     *     <li>parsing {@link Student} and {@link StudentExamAttributes}</li>
     *     <li>saving the parsed out {@link Student}</li>
     *     <li>adding group membership (creating student group if necessary)</li>
     * </ul>
     *
     * @param examinee the {@link Examinee} to be process
     * @param test the associated {@link Test}; needed for certain values
     * @param school   the {@link School}
     * @return the parsed {@link StudentExamAttributes}
     * @throws ImportException
     */
    StudentExamAttributes process(Examinee examinee, Test test, School school) throws ImportException;

    /**
     * Parses {@link School} from the {@link Examinee}
     *
     * @param examinee the {@link Examinee} to be parsed
     * @return the {@link School}
     * @throws ImportException
     */
    School parseExamineeRelationship(Examinee examinee) throws ImportException;
}
