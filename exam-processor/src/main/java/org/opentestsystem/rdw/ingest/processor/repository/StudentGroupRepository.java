package org.opentestsystem.rdw.ingest.processor.repository;

import org.opentestsystem.rdw.ingest.processor.model.StudentGroup;

import java.util.List;

/**
 * Repository for managing {@link StudentGroup}
 */
public interface StudentGroupRepository {

    /**
     * Upsert a {@link StudentGroup}.
     *
     * @param group    group to create or find/update
     * @param importId an id of the import that is manipulating this entity
     * @return created/found group (with id set)
     */
    StudentGroup upsert(StudentGroup group, long importId);

    /**
     * Lookup a group by name and school and year, returning the id.
     *
     * @param name       group name
     * @param schoolId   school id
     * @param schoolYear school year
     * @return the id of the group if found, otherwise null
     */
    Integer findIdByNameAndSchoolAndYear(String name, int schoolId, int schoolYear);

    /**
     * Add student to groups
     *
     * @param studentId student id
     * @param groupIds  group ids
     * @param importId  id of the import that adds the student to the groups
     */
    void addStudentToGroups(long studentId, List<Integer> groupIds, long importId);

    /**
     * Check if a student exists in a group
     *
     * @param studentId student id
     * @param groupId   group id
     * @return if the student exists in the group
     */
    boolean existsStudentInGroup(long studentId, int groupId);
}
