package org.opentestsystem.rdw.ingest.tasking.service.impl;

import org.junit.Test;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpMethod;
import org.springframework.http.client.ClientHttpRequest;

import java.io.IOException;
import java.net.URI;

import static org.assertj.core.api.Assertions.assertThat;

public class StubOAuth2RestTemplateTest {

    @Test
    public void itShouldSetAuthHeader() throws IOException {
        final String token = "bearer-token";
        final StubOAuth2RestTemplate restTemplate = new StubOAuth2RestTemplate(token);
        final ClientHttpRequest request = restTemplate.createRequest(URI.create("http://import"), HttpMethod.POST);
        assertThat(request.getHeaders().get(HttpHeaders.AUTHORIZATION).get(0)).isEqualTo("Bearer bearer-token");
    }
}