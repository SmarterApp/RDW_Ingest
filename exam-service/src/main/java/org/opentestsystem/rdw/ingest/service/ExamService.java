package org.opentestsystem.rdw.ingest.service;

import org.opentestsystem.rdw.ingest.auth.RdwUser;
import org.opentestsystem.rdw.ingest.model.RdwImport;

import java.io.InputStream;
import java.util.Optional;

/**
 * Service for manipulating exams / test results.
 */
public interface ExamService {

    /**
     * Accept the payload for import processing
     *
     * @param user user credentials
     * @param payload payload to process
     * @param contentType content type, e.g. application/xml
     * @param batch optional batch label
     * @return newly created import resource
     */
    RdwImport importExam(RdwUser user, String payload, String contentType, String batch);

    /**
     * Accept the text/csv payload for import processing
     *
     * @param user user credentials
     * @param is payload stream to process; caller is responsible for closing stream if necessary
     * @return newly created import resource
     */
    RdwImport importExamCsv(RdwUser user, InputStream is);

    /**
     * @param id import resource id
     * @return the import resource, may be absent if id not found
     */
    Optional<RdwImport> getImport(long id);
}
