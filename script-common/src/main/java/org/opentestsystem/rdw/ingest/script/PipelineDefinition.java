package org.opentestsystem.rdw.ingest.script;

import java.util.List;

/**
 * Definition of a Pipeline including its name, version, node definitions, and roll back information.
 */
public class PipelineDefinition extends VersionedResource {
    private final String rollbackVersion;
    private final List<String> options;
    private final List<VersionedResource> nodeDefinitions;

    /**
     * Constructor with all required parameters. Used by {@link PipelineDefinitionBuilder}.
     */
    private PipelineDefinition(final String name,
                               final String version,
                               final String rollbackVersion,
                               final List<String> options,
                               final List<VersionedResource> nodeDefinitions) {
        super(name, version, ResourceType.PIPELINE);
        this.rollbackVersion = rollbackVersion;
        this.options = options;
        this.nodeDefinitions = nodeDefinitions;
    }

    public static PipelineDefinitionBuilder builder() {
        return new PipelineDefinitionBuilder();
    }

    public String getRollbackVersion() {
        return rollbackVersion;
    }

    public List<String> getOptions() {
        return options;
    }

    public List<VersionedResource> getNodeDefinitions() {
        return nodeDefinitions;
    }

    public static class PipelineDefinitionBuilder {
        private String name;
        private String version;
        private String rollbackVersion;
        private List<String> options;
        private List<VersionedResource> nodeDefinitions;

        PipelineDefinitionBuilder() {
        }

        public PipelineDefinitionBuilder name(final String name) {
            this.name = name;
            return this;
        }

        public PipelineDefinitionBuilder version(final String version) {
            this.version = version;
            return this;
        }

        public PipelineDefinitionBuilder rollbackVersion(final String rollbackVersion) {
            this.rollbackVersion = rollbackVersion;
            return this;
        }

        public PipelineDefinitionBuilder options(final List<String> options) {
            this.options = options;
            return this;
        }

        public PipelineDefinitionBuilder nodeDefinitions(final List<VersionedResource> nodeDefinitions) {
            this.nodeDefinitions = nodeDefinitions;
            return this;
        }

        public PipelineDefinition build() {
            return new PipelineDefinition(name, version, rollbackVersion, options, nodeDefinitions);
        }

        public String toString() {
            return "PipelineDefinition.PipelineDefinitionBuilder(name="
                    + this.name + ", version="
                    + this.version + ", rollbackVersion="
                    + this.rollbackVersion + ", options="
                    + this.options + ", nodeDefinitions="
                    + this.nodeDefinitions + ")";
        }
    }
}
