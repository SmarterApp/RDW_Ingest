package org.opentestsystem.rdw.script;

import static java.nio.charset.StandardCharsets.UTF_8;

/**
 * Wrapper for output from the pipeline, whose type is determined by the scripts of the pipeline.
 */
public class PipelineResults {
    private final Object rawResults;

    public PipelineResults(final Object rawResults) {
        this.rawResults = rawResults;
    }

    public Object getRawResults() {
        return rawResults;
    }

    public String asString() {
        if (rawResults == null) {
            return null;
        }

        if (rawResults instanceof byte[]) {
            return new String((byte[])rawResults, UTF_8);
        }

        return rawResults.toString();
    }

    public byte [] asByteArray() {
        if (rawResults == null) {
            return null;
        }

        if (rawResults instanceof byte[]) {
            return (byte [])rawResults;
        }

        return rawResults.toString().getBytes(UTF_8);
    }
}
