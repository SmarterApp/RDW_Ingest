package org.opentestsystem.rdw.ingest.migrate.reporting.repository;

import org.opentestsystem.rdw.ingest.common.model.ImportStatus;
import org.opentestsystem.rdw.ingest.migrate.reporting.MigrateJobState;

import java.util.List;

/**
 * Repository for querying warehouse import state.
 */
public interface WarehouseImportRepository {

    /**
     * Fetch the next migrate job state. In the return value:<ul>
     *     <li>if first is null there is no work to do</li>
     *     <li>if blocker is not null, full batch was truncated</li>
     * </ul>
     *
     * @param prev previous import id, may be null
     * @param batchSize batch size
     * @return next migrate job params
     */
    MigrateJobState getMigrateJobState(Long prev, int batchSize);

    /**
     * Return all the import status values. Provided for diagnostics.
     *
     * @return all import status values
     */
    List<ImportStatus> findAllImportStatus();
}
