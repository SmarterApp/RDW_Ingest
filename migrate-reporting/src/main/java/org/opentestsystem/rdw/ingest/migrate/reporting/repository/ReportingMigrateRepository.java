package org.opentestsystem.rdw.ingest.migrate.reporting.repository;

import org.opentestsystem.rdw.ingest.migrate.reporting.Migrate;
import org.opentestsystem.rdw.ingest.migrate.reporting.MigrateStatus;

import java.util.Optional;

/**
 * Repository for managing migrate table in the reporting datamart
 */
public interface ReportingMigrateRepository {

    /**
     * Returnst the last migrate import id
     */
    Optional<Long> findLastMigratedImportId();

    /**
     * Creates a new migrate entry
     *
     * @param migrate {@link Migrate}
     */
    Migrate create(Migrate migrate);

    /**
     * Update the status of the migrate
     *
     * @param id     the id of the migrate to update
     * @param status the new status
     */
    void updateStatusById(long id, MigrateStatus status);
}
