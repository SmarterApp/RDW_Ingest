package org.opentestsystem.rdw.ingest.migrate.reporting.repository;

import org.opentestsystem.rdw.ingest.migrate.reporting.MigrateStatus;

import java.util.Optional;

/**
 * Repository for managing migrate table in the reporting datamart
 */
public interface ReportingMigrateRepository {

    /**
     * Returnst the last migrate import id
     */
    Optional<Long> findLastMigratedImportId();

    /**
     * Creates a new migrate entry
     *
     * @param id            the id f the migrate
     * @param status        the status
     * @param firstImportId the first import id
     * @param lastImportId  the last import id
     */
    void create(long id, MigrateStatus status, long firstImportId, long lastImportId);

    /**
     * Update the status of the migrate
     *
     * @param id     the id of the migrate to update
     * @param status the new status
     */
    void updateStatusById(long id, MigrateStatus status);
}
