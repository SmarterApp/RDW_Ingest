package org.opentestsystem.rdw.ingest.migrate.reporting;

import org.junit.Before;
import org.springframework.batch.core.JobExecution;
import org.springframework.batch.core.StepExecution;
import org.springframework.batch.item.ExecutionContext;
import org.springframework.batch.test.MetaDataInstanceFactory;


public abstract class SpringBatchStepIT extends SpringBatchIT {

    private StepExecution stepExecution;

    @Before
    public void createStepExecution() {
        stepExecution = MetaDataInstanceFactory.createStepExecution();
    }

    protected JobExecution launchStep(String stepName, boolean useStepExecutionContext) {
        if (useStepExecutionContext) return getJobLauncherTestUtils().launchStep(stepName, getStepExecutionContext());
        else return getJobLauncherTestUtils().launchStep(stepName);
    }

    protected ExecutionContext getStepExecutionContext() {
        return stepExecution.getExecutionContext();
    }
}
