package org.opentestsystem.rdw.ingest.migrate.reporting;

import org.junit.Test;
import org.springframework.batch.core.JobParameter;
import org.springframework.batch.core.JobParameters;

import static org.assertj.core.api.Assertions.assertThat;
import static org.opentestsystem.rdw.ingest.migrate.reporting.JobParams.createJobParams;

public class JobParamsTest {

    @Test
    public void itShouldSetIdentifyingJobParamAndPreserveCtorValues() {
        final JobParameters jobParameters = createJobParams(1, 5);

        final JobParameter jobIdParam = jobParameters.getParameters().get(JobParams.JobIdentifier);
        assertThat(jobIdParam.isIdentifying()).isTrue();
        assertThat(jobIdParam.getValue()).isNotNull();

        assertThat(jobParameters.getLong(JobParams.FirstImportId)).isEqualTo(1);
        assertThat(jobParameters.getLong(JobParams.LastImportId)).isEqualTo(5);
    }
}