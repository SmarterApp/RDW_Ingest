package org.opentestsystem.rdw.ingest.processor.service.impl;

import org.opentestsystem.rdw.ingest.common.model.School;
import org.opentestsystem.rdw.ingest.common.util.ParserHelper;

import java.util.Collection;

/**
 * Parses organization payloads; helper for DefaultOrganizationProcessor
 */
public interface OrganizationParser {

    /**
     * Parse payload and extract schools and districts.<br/>
     * This method should throw if the payload is unparseable. If the payload is parseable but has errors,
     * let the parser helper populate the error collector and return without throwing. If the payload is
     * parseable and good, return with throwing or populating the error collector.
     *
     * @param payload payload to parse
     * @param parserHelper parser helper
     * @return extracted schools (with district refs set)
     * @throws IllegalArgumentException if payload is not parseable
     */
    Collection<School> parse(byte[] payload, ParserHelper parserHelper);
}
