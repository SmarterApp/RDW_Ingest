package org.opentestsystem.rdw.ingest.processor.repository;

import org.opentestsystem.rdw.ingest.processor.model.WarehouseStandard;

import java.util.Collection;
import java.util.List;

/**
 * Repository for dealing with standards
 * Example: Common Core Standards
 */
public interface CommonCoreStandardRepository {

    /**
     * Finds all ids by a subject and natural ids
     * @param naturalIds the natural ids
     * @param subjectId the subject id
     */
    List<Integer> findIdsBySubjectIdAndNaturalIds(Iterable<String> naturalIds, Integer subjectId);

    /**
     * Return the existing standards for the given subject.
     *
     * @param subjectCode A subject code
     * @return the existing standards or empty collection if none exist
     */
    Collection<WarehouseStandard> findBySubject(String subjectCode);

    /**
     * Create the given standards in the repository.
     *
     * @param subjectCode   A subject code
     * @param standards     The standard codes to create
     */
    void create(String subjectCode, Collection<String> standards);

    /**
     * Delete the given standards from the repository.
     *
     * @param standardIds   The standard ids to delete
     */
    void delete(Collection<Integer> standardIds);

    /**
     * Test if any of the standards are referenced by any assessment items.
     *
     * @param standardIds   The standard ids to test
     * @return The first standard id that is reference by an assessment item
     */
    Integer hasItem(Collection<Integer> standardIds);
}
