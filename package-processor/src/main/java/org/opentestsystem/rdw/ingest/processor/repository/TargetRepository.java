package org.opentestsystem.rdw.ingest.processor.repository;

import org.opentestsystem.rdw.ingest.processor.model.WarehouseTarget;

import java.util.Collection;

/**
 * Repository for dealing with the target translation table
 */
public interface TargetRepository {

    /**
     * Finds an id of the target by its code and claim
     *
     * @param naturalId the naturalId of the target
     * @param claimId   The parent claim id
     * @return the id if it exists, null if it doesn't
     */
    Integer findIdByNaturalIdAndClaimId(String naturalId, int claimId);

    /**
     * Find all targets for the given subject.
     *
     * @param subjectCode   A subject code
     * @return All targets for the given subject
     */
    Collection<WarehouseTarget> findBySubject(String subjectCode);

    /**
     * Create a new target for the given subject and claim.
     *
     * @param subjectCode   A subject code
     * @param claimCode     A claim code
     * @param naturalId     The new target's natural id
     */
    void create(String subjectCode, String claimCode, String naturalId);

    /**
     * Delete the given target by id
     *
     * @param targetId A target id
     */
    void delete(int targetId);

    /**
     * Test if the given target is referenced by any assessment items.
     *
     * @param targetId A target id
     * @return True if the target is referenced by an assessment item
     */
    boolean hasItems(int targetId);

}
