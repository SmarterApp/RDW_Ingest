package org.opentestsystem.rdw.ingest.processor.repository;

import org.opentestsystem.rdw.ingest.processor.model.WarehouseItemDifficulty;

import java.util.Collection;

/**
 * Repository for dealing with item difficulty cutpoints
 */
public interface ItemDifficultyRepository {

    /**
     * Find all difficulty cuts for the given subject.
     *
     * @param subjectCode   A subject code
     * @return All difficulty cuts for the given subject
     */
    Collection<WarehouseItemDifficulty> findBySubject(String subjectCode);

    /**
     * Create new item difficulty cuts for the given subject
     *
     * @param subjectCode   A subject code
     * @param difficulties  The difficulty cuts to create
     */
    void create(String subjectCode, Collection<WarehouseItemDifficulty> difficulties);

    /**
     * Delete the given difficulty cuts by id
     *
     * @param difficultyIds The difficulty cut ids to remove
     */
    void delete(Collection<Integer> difficultyIds);

    /**
     * Test any of the given targets are referenced by any assessment items.
     *
     * @param difficultyIds The difficulty cut ids to test
     * @return The first difficulty cut id that is reference by an assessment item
     */
    Integer isReferenced(Collection<Integer> difficultyIds);

    /**
     * Update the cutpoints for the given item difficulties.
     *
     * @param difficulties  The difficulty cuts to update
     */
    void update(Collection<WarehouseItemDifficulty> difficulties);
}
