package org.opentestsystem.rdw.ingest.processor.repository;

import org.opentestsystem.rdw.ingest.processor.model.Assessment;
import org.opentestsystem.rdw.ingest.processor.model.Item;

import java.util.Collection;

/**
 * AssessmentPackageRepository - Interface for bulk inserting an assessment "package", which is a
 * collection of Assessments and corresponding Items
 */
public interface AssessmentPackageRepository {
    /**
     * Method to create new {@link Assessment}s
     *
     * @param assessments collection of {@link Assessment}s
     * @param importId    id of the import that is creating the {@link Assessment}s
     */
    void create(Collection<Assessment> assessments, long importId);

    /**
     * Method to update {@link Assessment}s.
     * It assumes that the given {@link Assessment}s have db ids initialized.
     * If an {@link Item} has a db id, an update is performed, otherwise a new item is created.
     * Note that items are not deleted.
     *
     * @param assessments collection of {@link Assessment}s
     * @param importId    id of the import that is updating the {@link Assessment}s
     */
    void update(Collection<Assessment> assessments, long importId);

    /**
     * Finds an {@link Assessment} by its natural id.
     *
     * @param id the natural id
     * @return the found {@link Assessment}; null if not found
     */
    Assessment findOneByNaturalId(String id);
}

