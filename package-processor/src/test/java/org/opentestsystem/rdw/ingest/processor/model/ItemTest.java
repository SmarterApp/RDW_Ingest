package org.opentestsystem.rdw.ingest.processor.model;

import org.junit.Test;

import static org.assertj.core.api.Assertions.assertThat;

/**
 * Unit test for Item class
 */
public class ItemTest {
    @Test
    public void itShouldCompareItems() {
        final Item.Builder builder = Item.builder()
                .naturalId("ItemId")
                .assessmentNaturalId("AssessmentId")
                .claimId(1)
                .targetId(1)
                .allowCalculator(true)
                .difficulty(1.5)
                .dok(1)
                .mathPractice(3);

        final Item item = builder.build();
        final Item sameItem = builder.build();

        assertThat(item).isEqualTo(sameItem);
        assertThat(item.hashCode()).isEqualTo(sameItem.hashCode());

        assertThat(sameItem).isNotEqualTo(null);

        Item otherItem = builder.naturalId("new key").build();
        assertThat(item).isNotEqualTo(otherItem);
        assertThat(item.hashCode()).isNotEqualTo(otherItem.hashCode());

        otherItem = builder.allowCalculator(false).build();
        assertThat(item).isNotEqualTo(otherItem);
        assertThat(item.hashCode()).isNotEqualTo(otherItem.hashCode());

        otherItem = builder.difficulty(0.1).naturalId("new key").build();
        assertThat(item).isNotEqualTo(otherItem);
        assertThat(item.hashCode()).isNotEqualTo(otherItem.hashCode());

        otherItem = builder.dok(9).naturalId("new key").build();
        assertThat(item).isNotEqualTo(otherItem);
        assertThat(item.hashCode()).isNotEqualTo(otherItem.hashCode());
    }

    @Test(expected = NullPointerException.class)
    public void itShouldNotAllowCertainNullParameters(){
        final Item.Builder builder = Item.builder()
                .naturalId("ItemId")
                .assessmentNaturalId("AssessmentId")
                .claimId(1)
                .targetId(1)
                .allowCalculator(true)
                .difficulty(1.5)
                .mathPractice(3);

        final Item item = builder.build();
    }

    @Test
    public void itShouldAllowCertainNullParameters() {
        final Item.Builder builder = Item.builder()
                .naturalId("ItemId")
                .assessmentNaturalId("AssessmentId")
                .claimId(1)
                .targetId(1)
                .difficulty(1.5)
                .dok(1);

        final Item item = builder.build();
    }
}
