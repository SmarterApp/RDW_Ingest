package org.opentestsystem.rdw.ingest.processor.model;

import org.junit.Test;

import static org.assertj.core.api.Assertions.assertThat;

/**
 * Unit test for the Assessment model
 */
public class AssessmentTest {

    /**
     * Required parameters are naturalId, cutPoints, maxScore, minScore, gradeId, subjectId, typeId
     * However, in usage in the Package Processor, gradeId, subjectId, and typeId are validated
     * against the database before they are set in the builder. If they aren't found, then building stops.
     */
    @Test(expected = NullPointerException.class)
    public void itShouldNotAllowCertainNullParameters() {
        final Assessment.Builder builder = Assessment.builder()
                .naturalId("id")
                .name("name")
                .schoolYear(2017)
                .gradeId(3)
                .label("label")
                .version("version")
                .cutPoints(new Double[]{1.3e1, 2.4e1, 3.3e3, 4.4e4})
                .maxScore(2000.0)
                .minScore(1000.0);

        builder.build();
    }

    /**
     * Optional parameters are name, version, label
     */
    @Test
    public void itShouldAllowCertainNullParameters() {
        final Assessment.Builder builder = Assessment.builder()
                .naturalId("id")
                .schoolYear(2017)
                .gradeId(3)
                .subjectId(5)
                .typeId(1)
                .version("version")
                .cutPoints(new Double[]{1.3e1, 2.4e1, 3.3e3, 4.4e4})
                .maxScore(2000.0)
                .minScore(1000.0);

        builder.build();
    }
}
