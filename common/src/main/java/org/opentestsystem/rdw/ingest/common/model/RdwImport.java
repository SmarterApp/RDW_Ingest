package org.opentestsystem.rdw.ingest.common.model;

import java.time.Instant;

import static java.time.Instant.now;

/**
 * An import request.
 */
public class RdwImport {
    private Long id;
    private ImportContent content;
    private String contentType;
    private String digest;
    private ImportStatus status;
    private String batch;
    private String creator;
    private Instant created;
    private Instant updated;
    private String message;

    /**
     * @return system id of import
     */
    public Long getId() {
        return id;
    }

    /**
     * Normal code should not call this, as the data framework will be setting it appropriately.
     *
     * @param id system id of import
     */
    public void setId(final Long id) {
        this.id = id;
    }

    /**
     * @return content, e.g. EXAM
     */
    public ImportContent getContent() {
        return content;
    }

    /**
     * @return content type, e.g. application/xml
     */
    public String getContentType() {
        return contentType;
    }

    /**
     * @return content digest, as a 32 character hex string
     */
    public String getDigest() {
        return digest;
    }

    public ImportStatus getStatus() {
        return status;
    }

    public String getBatch() {
        return batch;
    }

    public String getCreator() {
        return creator;
    }

    public Instant getCreated() {
        return created;
    }

    public Instant getUpdated() {
        return updated;
    }

    public String getMessage() {
        return message;
    }

    public Builder copy() {
        return builder().copy(this);
    }

    public static Builder builder() {
        return new Builder();
    }

    public static class Builder {
        private Long id;
        private ImportContent content;
        private String contentType;
        private String digest;
        private ImportStatus status;
        private String batch;
        private String creator;
        private Instant created;
        private Instant updated;
        private String message;

        public RdwImport build() {
            final RdwImport rdwImport = new RdwImport();
            rdwImport.id = id;
            rdwImport.content = content;
            rdwImport.contentType = contentType;
            rdwImport.digest = digest;
            rdwImport.status = status;
            rdwImport.batch = batch;
            rdwImport.creator = creator;
            rdwImport.created = created != null ? created : now();
            rdwImport.updated = updated != null ? updated : rdwImport.created;
            rdwImport.message = message;
            return rdwImport;
        }

        public Builder copy(final RdwImport rdwImport) {
            this.id = rdwImport.id;
            this.content = rdwImport.content;
            this.contentType = rdwImport.contentType;
            this.digest = rdwImport.digest;
            this.status = rdwImport.status;
            this.batch = rdwImport.batch;
            this.creator = rdwImport.creator;
            this.created = rdwImport.created;
            this.updated = rdwImport.updated;
            this.message = rdwImport.message;
            return this;
        }

        public Builder id(final Long id) {
            this.id = id;
            return this;
        }

        public Builder content(final ImportContent content) {
            this.content = content;
            return this;
        }

        public Builder contentType(final String contentType) {
            this.contentType = contentType;
            return this;
        }

        public Builder digest(final String digest) {
            this.digest = digest;
            return this;
        }

        public Builder status(final ImportStatus status) {
            this.status = status;
            return this;
        }

        public Builder batch(final String batch) {
            this.batch = batch;
            return this;
        }

        public Builder creator(final String creator) {
            this.creator = creator;
            return this;
        }

        public Builder created(final Instant created) {
            this.created = created;
            return this;
        }

        public Builder updated(final Instant updated) {
            this.updated = updated;
            return this;
        }

        public Builder message(final String message) {
            this.message = message;
            return this;
        }
    }
}
