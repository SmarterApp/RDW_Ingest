package org.opentestsystem.rdw.ingest.status;

/**
 * Helper to handle general exceptions for {@link StatusIndicator}s.
 */
public abstract class AbstractStatusIndicator implements StatusIndicator {

    @Override
    public Status status() {
        Status.Builder builder = Status.builder();
        try {
            doStatusCheck(builder);
        } catch (final Exception e) {
            builder.rating(Rating.Failed);
        }
        return builder.build();
    }

    /**
     * Perform the actual status check.
     *
     * @param builder status builder
     * @throws Exception if any problem, results in status of Failed
     */
    protected abstract void doStatusCheck(final Status.Builder builder);
}
