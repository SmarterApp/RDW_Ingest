package org.opentestsystem.rdw.ingest.status;

import org.junit.Test;

import java.util.Map;

import static org.assertj.core.api.Assertions.assertThat;

public class LocalSystemStatusIndicatorTest {

    @Test
    public void itShouldProduceStatus() {
        final Status status = new LocalSystemStatusIndicator().status();

        // spot check a couple values
        assertThat(status.getStatusRating()).isEqualTo(Rating.Ideal.value());

        assertThat(status.getDetails().get("memory")).isNotNull();
        assertThat(status.getDetails().get("processor")).isNotNull();
        assertThat(status.getDetails().get("uptime")).isNotNull();

        assertThat(((Map<String, Object>) status.getDetails().get("memory")).get("jvmFreeMemory")).isNotNull();
    }
}
