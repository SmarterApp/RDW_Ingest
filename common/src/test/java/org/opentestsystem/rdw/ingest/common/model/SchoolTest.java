package org.opentestsystem.rdw.ingest.common.model;

import org.junit.Test;

import static org.assertj.core.api.Assertions.assertThat;

public class SchoolTest {

    @Test
    public void itShouldPreserveBuilderValues() {
        final District district = District.builder().name("district").naturalId("district id").stateCode("code").build();
        final School school = School.builder().name("school").naturalId("school id").district(district).build();
        assertThat(school.getNaturalId()).isEqualTo("school id");
        assertThat(school.getName()).isEqualTo("school");
        assertThat(school.getDistrict()).isSameAs(district);
    }

    @Test
    public void itAllowsDistrictToBeSet() {
        final District district = District.builder().name("district").naturalId("district id").stateCode("code").build();
        final School school = School.builder().name("school").naturalId("school id").district(district).build();
        final District anotherDistrict = District.builder().name("district2").naturalId("district2").stateCode("code").build();
        school.setDistrict(anotherDistrict);
        assertThat(school.getDistrict()).isSameAs(anotherDistrict);
    }

    @Test
    public void itShouldCompareSchool() {
        final District district = District.builder().name("district").naturalId("district id").stateCode("code").build();
        final School.Builder builder = School.builder().name("school").naturalId("school id").district(district);

        final School school = builder.build();
        final School sameSchool = builder.build();

        assertThat(school).isEqualTo(sameSchool);
        assertThat(school.hashCode()).isEqualTo(sameSchool.hashCode());

        assertThat(builder.build()).isNotEqualTo(null);

        School diffSchool = builder.name("new name").build();
        assertThat(school).isNotEqualTo(diffSchool);
        assertThat(school.hashCode()).isNotEqualTo(diffSchool.hashCode());

        diffSchool = builder.name("school").naturalId("new id").build();
        assertThat(school).isNotEqualTo(diffSchool);
        assertThat(school.hashCode()).isNotEqualTo(diffSchool.hashCode());

        diffSchool = builder.naturalId("school id").district(District.builder().name("district 1").naturalId("district id").stateCode("code").build()).build();
        assertThat(school).isNotEqualTo(diffSchool);
        assertThat(school.hashCode()).isNotEqualTo(diffSchool.hashCode());
    }
}