package org.opentestsystem.rdw.ingest.repository;

import org.opentestsystem.rdw.ingest.common.model.ImportStatus;
import org.opentestsystem.rdw.ingest.common.model.RdwImport;

import java.util.List;

/**
 * A repository that manages {@link RdwImport}s
 */
public interface RdwImportRepository {

    /**
     * Create a new import record. This ignores any id on the import object; the returned
     * object will have a newly assigned id.
     *
     * @param rdwImport import object to save
     * @return newly saved import object
     */
    RdwImport create(RdwImport rdwImport);

    RdwImport findOne(long id);

    RdwImport findOneByDigest(String digest);

    List<RdwImport> findByBatch(String batch);

    List<RdwImport> findByStatus(ImportStatus status);

    boolean exists(long id);

    long count();

    void delete(long id);

    /**
     * Return the list of import statuses defined in the system.
     * This list should not change except perhaps during software upgrades.
     * This method is provided mostly as a diagnostic hook.
     *
     * @return list of import statuses
     */
    List<ImportStatus> findAllStatuses();
}
