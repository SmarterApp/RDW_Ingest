package org.opentestsystem.rdw.ingest.service;

import org.opentestsystem.rdw.ingest.auth.RdwUser;
import org.opentestsystem.rdw.ingest.common.model.ImportStatus;
import org.opentestsystem.rdw.ingest.common.model.RdwImport;

import java.util.List;
import java.util.Optional;

/**
 * Service for manipulating exams / test results.
 */
public interface ReportingPackageService {

    /**
     * Accept the payload for import processing
     *
     * @param user user credentials
     * @param payload payload to process
     * @param contentType content type, e.g. application/xml
     * @param batch optional batch label
     * @return newly created import resource
     */
    RdwImport importPackage(String payload, String contentType, String batch);

    /**
     * @param id import resource id
     * @return the import resource, may be absent if id not found
     */
    Optional<RdwImport> getImport(long id);

    /**
     * TODO - consider a query object for criteria
     *
     * @param batch batch filter
     * @param status status filter
     * @return list of imports matching criteria; may be empty, won't be null
     */
    List<RdwImport> getImports(String batch, ImportStatus status);
}
